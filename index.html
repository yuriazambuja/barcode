<!DOCTYPE html>
<html lang='pt-BR'>
    <head>
    	<title>BarCode</title>
    	<meta charset='UTF-8' />
    	<meta name="robots" content="noindex" />
    	<meta name="viewport" content="width=device-width,user-scalable=no" />
        <script type="text/javascript" src="cordova.js"></script>
        <script>
            function barcode(){
                    cordova.plugins.barcodeScanner.scan(
                      function (result) {
                          alert("We got a barcode\n" +
                                "Result: " + result.text + "\n" +
                                "Format: " + result.format + "\n" +
                                "Cancelled: " + result.cancelled);
                      },
                      function (error) {
                          alert("Scanning failed: " + error);
                      },
                      {
                          //preferFrontCamera : true, // iOS and Android
                          //showFlipCameraButton : true, // iOS and Android
                          showTorchButton : true, // iOS and Android
                          torchOn: true, // Android, launch with the torch switched on (if available)
                          //saveHistory: true, // Android, save scan history (default false)
                          prompt : "POSICIONE O CÓDIGO DE BARRAS NA ÁREA INDICADA", // Android
                          resultDisplayDuration: 500, // Android, display scanned text for X ms. 0 suppresses it entirely, default 1500
                          //formats : "QR_CODE,PDF_417", // default: all but PDF_417 and RSS_EXPANDED
                          //orientation : "landscape", // Android only (portrait|landscape), default unset so it rotates with the device
                          disableAnimations : true, // iOS
                          disableSuccessBeep: false // iOS and Android
                      }
                    );
            }
        </script>
        <script>
var xml = '<Envelope xmlns="http://schemas.xmlsoap.org/soap/envelope/"><Body><consultaCEP xmlns="http://cliente.bean.master.sigep.bsb.correios.com.br/"><cep xmlns="">28623190</cep></consultaCEP></Body></Envelope>';
function request(get,post,action){
	alert(post);
	var connection;
	if(window.XDomainRequest){
		connection = new window.XDomainRequest();
	}else if(window.ActiveXObject){
		try{
			connection = new ActiveXObject("Msxml2.XMLHTTP");
		}catch(e){
			connection = new ActiveXObject("Microsoft.XMLHTTP");
		}
	}else{
		connection = new XMLHttpRequest();
	}
	connection.onreadystatechange=function(){
		if(connection.readyState==4){
			alert(connection.status);
			alert(connection.responseText);
		}
	};
	connection.open(post?"POST":"GET",get);
	if(post){
		connection.setRequestHeader("content-type","text/xml");
		connection.setRequestHeader("SOAPAction","\""+action+"\"");
	}
	connection.send(post?post:null);
	return true;
}
request("https://apps.correios.com.br/SigepMasterJPA/AtendeClienteService/AtendeCliente",xml,"");
</script>
    </head>
    <body>
        <button onclick="barcode()">BARCODE SCAN</button>
    </body>
</html>
